<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="/socket.io/socket.io.js">
    </script>
    <script>
        var socket;
        function dress(socket){
            socket.on('connected', function(data){
                console.log("connected");
                document.getElementById('estado').innerHTML = 'connected';
                socket.emit('subscribe', 'Ax');
                socket.on('data', function(data) {
                    document.getElementById('salida').innerHTML += JSON.stringify(data)+ "<br>";
                });
            });
        }
        function connect_first() {
            document.getElementById('estado').innerHTML = 'connecting first time';
            socket = io.connect('http://localhost:3001');
            dress(socket);

        }
        function connect() {
            document.getElementById('estado').innerHTML = 'reconnecting';
            socket.socket.reconnect('http://localhost:3001');
            dress(socket);
        }
        function disconnect() {
            socket.disconnect();
            document.getElementById('estado').innerHTML = 'disconnected';
        }
        document.addEventListener('DOMContentLoaded', function() {
            connect_first();
        })

    </script>
</head>
<body>
  <button onclick="connect()">connect</button><br>
  <button onclick="disconnect()">disconnect</button><br>
  <div id="estado">?</div>
  <div id="salida">
      (Inicio)<br>
  </div>
</body>
</html>